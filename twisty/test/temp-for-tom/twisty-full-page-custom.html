<!DOCTYPE html>
<html>
<head>
  <title>Full-Page Test | twisty.js</title>
 <style>
 twisty { width: 800px; height: 500px; display:block; }
 </style>
  <script src="../../../build/alg/algorithm.js"></script>
  <script src="../../../build/alg/traversal.js"></script>
  <script src="../../../build/alg/example.js"></script>

  <script src="../../../build/ksolve/puzzle_definitions.js"></script>
  <script src="../../../build/ksolve/ksolve.js"></script>
  <script src="../../../build/ksolve/parser.js"></script>

  <script src="../../../build/twisty/puzzle.js"></script>
  <script src="../../../build/twisty/timeline.js"></script>
  <script src="../../../build/twisty/cursor.js"></script>
  <script src="../../../build/twisty/anim.js"></script>
  <script src="../../../build/twisty/widget.js"></script>
  <script src="../../../build/twisty/twisty.js"></script>
  <script src="PuzzleGeometry.js"></script>
  <link href="../../twisty.css" rel="stylesheet" type="text/css">

  <script>
 function LucasSetup(ksolve, svg, movenames) {
    var p = KSolve.createPuzzle(ksolve, svg) ;
    var elem = document.querySelector("#custom-example");
    elem.textContent = "" ;
    var twisty = new Twisty.Twisty(elem, {
      puzzle: p,
      alg: new Alg.Sequence(
        movenames.map(function(f){return new Alg.BlockMove(f,1)})
      )
    });
  }
  </script>
<script>
var lastval ;
var textinput ;
function checkchange() {
   var s = textinput.value ;
   if (s == lastval)
      return ;
   lastval = s ;
   var p = PuzzleGeometry.prototype.parsedesc(s) ;
   if (p) {
      pg = new PuzzleGeometry(p[0], p[1]) ;
      pg.allstickers() ;
      var desc =
         "Faces " + pg.baseplanerot.length + "<BR>" +
         "Stickers per face " + pg.stickersperface + "<BR>" +
         "Cubies " + pg.cubies.length + "<BR>" +
         "Short edge " + pg.shortedge + "<BR>" +
         "Edge distance " + pg.edgedistance + "<BR>" +
         "Vertex distance " + pg.vertexdistance + "<BR>" ;
      document.getElementById('data').innerHTML = desc ;
      changeddisplay(pg) ;
   }
}
function doselection(el) {
   if (el.target.value != '') {
      textinput.value = el.target.value ;
      checkchange() ;
   }
}
function changeddisplay(pg) {
   if (!pg)
      return ;
   pg.genperms() ;
   var html = pg.generatesvg(800, 500, 10) ;
   LucasSetup(pg.writeksolve("TwistyPuzzle", true), html, pg.ksolvemovenames) ;
}
function setup() {
   var select = document.getElementById('puzzleoptions') ;
   var puzzledesc = PuzzleGeometry.prototype.getpuzzles() ;
   for (var i=0; i<puzzledesc.length; i += 2) {
      var opt = document.createElement("option") ;
      opt.value = puzzledesc[i] ;
      opt.innerHTML = puzzledesc[i+1] ;
      select.add(opt) ;
   }
   textinput = document.getElementById('desc') ;
   select.onchange = doselection ;
   checkchange() ;
   setInterval(checkchange, 0.5) ;
}
</script>
</head>
<body onload="setup();">
Desc <input type=text id=desc value="c f 0.3333333333" size="50">
</input><br>
<select id="puzzleoptions">
<option value="">custom</option>
</select><br>
<twisty id="custom-example" initialization="custom"></twisty><br>
<div id=data></div><br>
</body>
</html>
